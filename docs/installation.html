<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DKAN: Installation</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="all.min.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <img alt="Logo" src="logo.svg"/>
  </div>
  <!-- <div id="projectname">DKAN</div> -->
  <div id="projectdetails">
    <span id="projectbrief">Alpha</span>
    <span id="projectnumber">v2.0.2</span>
  </div>
  <div id="search">
            <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('installation.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md0">Requirements</a></li>
<li class="level2"><a href="#autotoc_md1">Starting a new project</a></li>
<li class="level2"><a href="#autotoc_md2">Installing DKAN</a></li>
<li class="level2"><a href="#autotoc_md3">Graphical User Interface (GUI)</a><ul><li class="level3"><a href="#autotoc_md4">React App Embedded in Drupal</a></li>
<li class="level3"><a href="#autotoc_md5">Dummy content</a></li>
</ul>
</li>
</ul>
</ul>
</div>
<div class="textblock"><p>For either working on a project locally or working on the core DKAN software and libraries, using a standardized, <a href="https://www.docker.com/">docker</a>-based local environment is recommended. Our <a href="https://github.com/getdkan/dkan-tools">DKAN Tools</a> command-line utility will work on Mac or Linux to create containers for the various services needed by DKAN. This will ensure you have the same setup as DKAN's core developers, and that your environment is very close to that of our continuous integration tools.</p>
<p>It is possible, though not reccomended, to use DKAN Tools without docker and using your system's native webserver, php, and database tools; see the DKAN Tools documentation.</p>
<p>If you are making changes or improvements to DKAN, contribute back using the <a href="https://help.github.com/categories/collaborating-with-issues-and-pull-requests/">standard fork and pull-request workflow in Gitihub</a>.</p>
<h2><a class="anchor" id="autotoc_md0"></a>
Requirements</h2>
<ol type="1">
<li>Install <a href="https://github.com/GetDKAN/dkan-tools">dkan-tools</a>.</li>
<li>Set an environment variable called <code>DRUPAL_VERSION</code> with a value of <code>V8</code>.<ol type="a">
<li>On the command line, enter <code>export DRUPAL_VERSION=V8</code> or set in <code>.bashrc</code></li>
</ol>
</li>
<li>Setup and start the proxy:<ol type="a">
<li>Add <code>dkan</code> to <code>/etc/hosts</code></li>
<li>Start the proxy: <code>docker run -d -p 80:80 -v /var/run/docker.sock:/tmp/docker.sock:ro jwilder/nginx-proxy</code></li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1"></a>
Starting a new project</h2>
<p>Follow instructions in the <a href="https://github.com/getdkan/dkan-tools">README</a> to get dkan-tools working on your system. The dkan-tools README is still focused on <a class="el" href="namespaceDrupal.html">Drupal</a> 7 ("DKAN 1") usage. While the basic installation instructions are the same for either scenario, installing and working with DKAN requires the following steps. <br  />
</p>
<ol type="1">
<li><p class="startli">Assuming you have dkan-tools installed and working locally, you will need to create an environment variable <code>DRUPAL_VERSION</code> and set it to <code>V8</code>.</p>
<p class="startli"><code>$ export DRUPAL_VERSION=V8</code></p>
<p class="startli">Now DTKL in your current session will know to use only <a class="el" href="namespaceDrupal.html">Drupal</a> 8 commands. If you are only using DKAN2 and are not using dkan-tools to manage any <a class="el" href="namespaceDrupal.html">Drupal</a> 7-based DKAN projects, you may want to add the same <code>export</code> command to your .bashrc or .bash_profile file.</p>
</li>
<li>Create a directory for your project: <code>mkdir &lt;directory-name&gt; &amp;&amp; cd &lt;directory-name&gt;</code></li>
<li>Initialize your project with dkan-tools: <code>dktl init</code></li>
</ol>
<h2><a class="anchor" id="autotoc_md2"></a>
Installing DKAN</h2>
<ol type="1">
<li>Get <a class="el" href="namespaceDrupal.html">Drupal</a>: <code>dktl get &lt;drupal-version&gt;</code> (currnet recommended version: 8.7.3)</li>
<li>Get <a class="el" href="namespaceDrupal.html">Drupal</a> dependencies, and install DKAN plus the frontend application: <code>dktl make --frontend</code></li>
<li>Most likely, dkan-tools will complain that your version of Drush is out-of-date. Upgrade with <code>dktl updatedrush</code></li>
<li>Install DKAN: <code>dktl install</code></li>
<li>Access the site: <code>dktl drush uli --uri=dkan</code></li>
</ol>
<dl class="section note"><dt>Note</dt><dd>If you are working directly on the DKAN project or one of its libraries and want to be able to commit changes and submit pull requests, use the <code>--prefer-source</code> option with <code>dktl make</code>. This option will be passed directly to Composer; see the <a href="https://getcomposer.org/doc/03-cli.md#command-line-interface-commands">Composer CLI documentation</a> for more details.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should <em>only</em> use the built-in <code>dktl updatedrush</code> command when using our Docker-based environment.</dd></dl>
<p>The last step above will provide a link to log in to the new site as "user 1" (admin) without a password, using a port of localhost. This will allow you to create user accounts and content, and otherwise manage your DKAN site using the <a class="el" href="namespaceDrupal.html">Drupal</a> administration pages.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Graphical User Interface (GUI)</h2>
<p>DKAN for <a class="el" href="namespaceDrupal.html">Drupal</a> 8 is trying to work with independent pieces that can be used no only by us but any other open data catalog. With that goal, we are working with a decoupled React application as the frontend for DKAN.</p>
<p>The <a href="https://github.com/GetDKAN/data-catalog-frontend">React App's</a> README contains instruction on how to work with DKAN.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
React App Embedded in Drupal</h3>
<p>DKAN comes with an integration module that allows the React App driving the frontend to be embedded in <a class="el" href="namespaceDrupal.html">Drupal</a>.</p>
<p>To get the integration working follow these steps:</p><ol type="1">
<li>Place the source for the <code>data-catalog-frontend</code> in side of your <code>docroot</code> directory.</li>
<li>Follow the instructions in the README of <code>data-catalog-frontend</code>, but instead of runnig the development server at the end, build a copy with <code>npm run build</code></li>
<li>Enable the integration module <code>dkan_frontend</code></li>
<li>Change the sites configuration to point the homepage (<code>/</code>) to <code>/home</code></li>
</ol>
<h3><a class="anchor" id="autotoc_md5"></a>
Dummy content</h3>
<p>To populate your site with example content, and then remove it:</p>
<div class="fragment"><div class="line">$ drush dkan-dummy-content:create</div>
<div class="line">$ drush dkan-dummy-content:remove</div>
</div><!-- fragment --><p><a class="el" href="prod.html">Deploying to other environments</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
